:root{
  --bg: #F7FBFB;
  --accent: #00A78E;
  --accent-2: #06B6D4;
  --muted: #64748B;
  --text: #0F172A;
  --card: #FFFFFF;
  --glass: rgba(15,23,42,0.03);
  --border: #E6EEF0;
  --radius: 12px;
  --shadow-1: 0 6px 20px rgba(17,24,39,0.06);
  --max: 1200px;
  --grid-gap: 18px;
  --sidebar-w: 220px;
}

[data-theme="dark"]{
  --bg: #071024;
  --accent: #00D0A0;
  --accent-2: #00A7FF;
  --muted: #9AA7B2;
  --text: #E6EEF3;
  --card: rgba(10,20,30,0.6);
  --border: rgba(255,255,255,0.04);
  --shadow-1: 0 12px 30px rgba(3,6,12,0.6);
}

*{box-sizing:border-box}
html,body,#root{height:100%}
body{
  margin:0;
  background: linear-gradient(180deg, #F2FAF9 0%, #F7FBFB 100%);
  color:var(--text);
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

.app-shell{ display:flex; min-height:100vh; gap: 0; }
.sidebar-shell{ width: var(--sidebar-w); flex: 0 0 var(--sidebar-w); background: linear-gradient(180deg, #FFFFFF, #F8FBFB); border-right: 1px solid var(--border); padding: 20px; }
.main-shell{ flex:1; display:flex; flex-direction:column; min-height:100vh; min-width: 0; }

.sidebar{ display:flex; flex-direction:column; height:100%; gap: 22px; }
.sidebar__top, .sidebar__mid{ display:flex; flex-direction:column; gap:8px; }
.sidebar__section-title{ font-size:12px; font-weight:700; color:var(--muted); text-transform:uppercase; letter-spacing:0.6px; margin-bottom:6px;}
.nav-item{ padding:10px 12px; border-radius:8px; text-decoration:none; color:var(--text); font-weight:600; display:block; transition: background .18s ease, transform .12s ease; }
.nav-item:hover{ background: rgba(0,0,0,0.03); transform:translateY(-2px); }
.nav-item.active{ background: linear-gradient(90deg, rgba(0,167,142,0.08), rgba(6,182,212,0.05)); color:var(--accent); box-shadow: inset 0 0 0 1px rgba(0,167,142,0.06); }

.topbar{ display:flex; align-items:center; gap:18px; padding:18px 22px; border-bottom:1px solid var(--border); background: transparent; justify-content: space-between; }
.topbar__left{ display:flex; align-items:center; gap:12px; flex: 1; min-width: 0; }
.brand-compact{ display:flex; align-items:center; gap:12px; min-width: 0; }
.brand-compact__title{ font-weight:800; font-size:16px; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.topbar__right{ display:flex; align-items:center; gap:12px; }

.avatar{ width:38px; height:38px; border-radius:10px; background: linear-gradient(180deg, var(--accent), var(--accent-2)); color:white; display:grid; place-items:center; font-weight:800; box-shadow: 0 8px 24px rgba(0,167,142,0.12); flex: 0 0 auto; }

.btn-ghost{ padding:8px 10px; border-radius:8px; border:1px solid var(--border); background:transparent; font-weight:700; color:var(--muted); }

.workspace{
  padding: 22px;
  width: min(var(--max), 100%);
  margin: 0 auto;
  min-width: 0;
}

.summary-grid{ display:grid; grid-template-columns: 1.6fr 1fr 1fr; gap: var(--grid-gap); margin-bottom: 20px; }
.summary-card{
  background: var(--card);
  border-radius: 14px;
  padding: 18px;
  border: 1px solid var(--border);
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow: var(--shadow-1);
  min-width: 0;
}
.summary-card.highlight{ border: 1px solid rgba(0,0,0,0.07); transform: translateY(-4px); }
.summary-card__left{ display:flex; gap:14px; align-items:center; min-width: 0; }
.summary-card__icon{ width:48px; height:48px; display:grid; place-items:center; background: linear-gradient(135deg, rgba(0,167,142,0.12), rgba(6,182,212,0.06)); border-radius:10px; color:var(--accent); flex: 0 0 auto; }
.summary-card__label{ font-size:12px; color:var(--muted); font-weight:700; }
.summary-card__value{ font-size:20px; font-weight:900; margin-top:4px; }
.summary-card__meta{ font-size:12px; color:var(--muted); }

.layout{ display:grid; grid-template-columns: 1fr 420px; gap: var(--grid-gap); align-items:start; }
.panel--combined{ background: var(--card); border-radius: 14px; padding: 16px; border:1px solid var(--border); box-shadow: var(--shadow-1); }

.filter-controls{
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-bottom:10px;
  background: linear-gradient(180deg, rgba(0,0,0,0.01), transparent);
  border: 1px solid rgba(0,0,0,0.04);
  border-radius: 12px;
  padding: 12px;
}

.filter-row{
  display:grid;
  grid-template-columns: 160px 1fr 160px;
  gap: 12px;
  align-items: end;
  min-width: 0;
}

.table-wrap{ margin-top: 8px; overflow:auto; border-radius:10px; border:1px solid var(--border); -webkit-overflow-scrolling: touch; }
.expense-table{ width:100%; border-collapse:collapse; min-width: 640px; }
.expense-table thead th{ text-align:left; padding:12px 16px; background: rgba(0,0,0,0.02); font-size:12px; color:var(--muted); font-weight:700; position:sticky; top:0; z-index:1; }
.expense-table tbody td{ padding:14px 16px; border-bottom:1px solid rgba(0,0,0,0.03); vertical-align: middle; }
.expense-table tbody tr.zebra{ background: linear-gradient(90deg, rgba(0,0,0,0.015), transparent); }
.title-main{ font-weight:700; color:var(--text); margin-bottom:6px; }
.small{ font-size:12px; color:var(--muted); }
.category-pill{ padding:6px 8px; border-radius:999px; font-weight:700; font-size:12px; color:#0f172a; display:inline-block; }

.col--date{ width:120px; }
.col--amount{ width:120px; text-align:right; font-weight:800; }
.col--actions{ width:140px; text-align:right; }

.action-btn{ padding:8px 10px; border-radius:8px; border:1px solid var(--border); background:transparent; font-weight:700; margin-left:8px; color:var(--muted); white-space: nowrap; }
.action-btn.danger{ color:#E11D48; border-color: rgba(225,29,72,0.08); }

.table-empty{ padding:28px; text-align:center; border-radius:10px; background: linear-gradient(180deg, rgba(0,0,0,0.02), transparent); color:var(--muted); }
.empty-illustration{ font-size:34px; margin-bottom:8px; }
.empty-title{ font-weight:800; font-size:16px; margin-bottom:6px; }

.panel{ background:var(--card); border-radius:14px; padding:18px; border:1px solid var(--border); box-shadow: var(--shadow-1); }
.field{ display:flex; flex-direction:column; gap:6px; margin-bottom:6px; }
.input, textarea, select{ padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:transparent; font-weight:600; width: 100%; }
.input:focus, textarea:focus, select:focus{ outline: none; box-shadow: 0 6px 20px rgba(0,167,142,0.06); border-color: rgba(0,167,142,0.18); }

.app-footer{ margin-top:auto; padding:20px 22px; border-top:1px solid var(--border); text-align:center; color:var(--muted); font-size:13px; }

.panel-head { display:flex; justify-content:space-between; align-items:flex-start; gap:12px; margin-bottom: 14px; flex-wrap: wrap; }
.panel-title { font-size: 18px; font-weight: 900; margin-bottom: 4px; }
.panel-subtitle { color: var(--muted); font-weight: 600; font-size: 13px; }

.panel--form .input--textarea { min-height: 90px; resize: vertical; }

.expense-form .form-grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  min-width: 0;
}
.field--span2 { grid-column: span 2; }

.form-actions{
  display:flex;
  gap: 10px;
  margin-top: 14px;
  align-items:center;
  flex-wrap: wrap;
}

.btn-primary{
  padding: 10px 14px;
  border-radius: 10px;
  border: none;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color: white;
  font-weight: 800;
  box-shadow: 0 10px 24px rgba(0,167,142,0.12);
  cursor: pointer;
  white-space: nowrap;
}

.input--error{ border-color: rgba(225,29,72,0.28) !important; box-shadow: 0 0 0 4px rgba(225,29,72,0.06); }
.error{
  font-size: 12px;
  color: #E11D48;
  font-weight: 700;
  margin-top: 4px;
}

.combined-head{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap: 12px;
  margin-bottom: 12px;
  flex-wrap: wrap;
}

.combined-title{ font-size: 18px; font-weight: 900; }
.combined-subtitle{ font-size: 13px; color: var(--muted); font-weight: 600; margin-top: 4px; }

.combined-body{ display:flex; flex-direction:column; gap: 12px; }
.combined-divider{ height: 1px; background: rgba(0,0,0,0.06); margin: 2px 0; }

.modal-backdrop{
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  z-index: 100;
  padding: 16px;
}

.modal-click-catcher{
  position:absolute;
  inset:0;
  background: rgba(2, 6, 23, 0.35);
  border: 0;
}

.modal{
  position: relative;
  z-index: 101;
  width: min(720px, 100%);
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: 0 24px 70px rgba(2,6,23,0.22);
  overflow: hidden;
  max-height: calc(100vh - 32px);
  display: flex;
  flex-direction: column;
}

.modal-head{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap: 12px;
  padding: 16px 18px;
  border-bottom: 1px solid rgba(0,0,0,0.06);
  flex-wrap: wrap;
}

.modal-title{ font-size: 18px; font-weight: 900; }
.modal-subtitle{ font-size: 13px; color: var(--muted); font-weight: 600; margin-top: 4px; }

.icon-btn{
  width: 36px;
  height: 36px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: transparent;
  font-weight: 900;
  cursor: pointer;
  flex: 0 0 auto;
}

.modal-body{ padding: 16px 18px 18px; overflow: auto; }

.modal-form .modal-grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  min-width: 0;
}

.modal-actions{
  display:flex;
  justify-content:flex-end;
  gap: 10px;
  margin-top: 14px;
  flex-wrap: wrap;
}

.input--textarea{ min-height: 90px; resize: vertical; }

@media (max-width: 1024px){
  .summary-grid{ grid-template-columns: 1fr 1fr; }
  .layout{ grid-template-columns: 1fr; }
  .sidebar-shell{ width: 200px; flex-basis: 200px; padding: 18px; }
}

@media (max-width: 820px){
  .summary-grid{ grid-template-columns: 1fr; }
  .workspace{ padding: 16px; }
  .topbar{ padding: 14px 16px; }
  .app-footer{ padding: 16px; }
  .expense-form .form-grid{ grid-template-columns: 1fr; }
  .field--span2{ grid-column: span 1; }
  .modal-form .modal-grid{ grid-template-columns: 1fr; }
}

@media (max-width: 720px){
  .app-shell{ flex-direction: column; }
  .sidebar-shell{
    width: 100%;
    flex: 0 0 auto;
    border-right: 0;
    border-bottom: 1px solid var(--border);
    padding: 14px 16px;
  }
  .sidebar{ flex-direction: row; flex-wrap: wrap; gap: 10px 12px; height: auto; }
  .sidebar__section-title{ display:none; }
  .sidebar__top, .sidebar__mid{ flex-direction: row; flex-wrap: wrap; gap: 10px; }
  .nav-item{ padding: 8px 10px; }
  .combined-head{ align-items: stretch; }
  .btn-primary{ width: 100%; }
  .filter-row{ grid-template-columns: 1fr; }
  .expense-table{ min-width: 560px; }
}

@media (max-width: 420px){
  .workspace{ padding: 14px; }
  .summary-card{ padding: 14px; }
  .summary-card__value{ font-size: 18px; }
  .action-btn{ margin-left: 6px; padding: 8px 8px; }
  .expense-table{ min-width: 520px; }
}